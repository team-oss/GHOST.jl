<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · GHOST</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/custom.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">GHOST</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../manual/">Manual</a></li><li class="is-active"><a class="tocitem" href>API</a><ul class="internal"><li><a class="tocitem" href="#Public"><span>Public</span></a></li><li><a class="tocitem" href="#Private"><span>Private</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/master/docs/src/api.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><h2 id="Public"><a class="docs-heading-anchor" href="#Public">Public</a><a id="Public-1"></a><a class="docs-heading-anchor-permalink" href="#Public" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="GHOST.GHOST" href="#GHOST.GHOST"><code>GHOST.GHOST</code></a> — <span class="docstring-category">Module</span></header><section><div><pre><code class="language-julia">GHOST</code></pre><p>This is a module for collecting GitHub data about open source repositories and contributors.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/GHOST.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GHOST.GitHubPersonalAccessToken" href="#GHOST.GitHubPersonalAccessToken"><code>GHOST.GitHubPersonalAccessToken</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">GitHubPersonalAccessToken(login::AbstractString,
                          token::AbstractString,
                          )::GitHubPersonalAccessToken</code></pre><p>A GitHub Personal Access Token</p><p><strong>Fields</strong></p><ul><li><code>login::String</code></li><li><code>token::String</code></li><li><code>client::Client</code></li><li><code>limits::Limits</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/01_BaseUtils.jl#L19-L32">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GHOST.find_queries-Tuple{AbstractString}" href="#GHOST.find_queries-Tuple{AbstractString}"><code>GHOST.find_queries</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">find_queries(spdx::AbstractString)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/03_Queries.jl#L207-L209">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GHOST.find_repos-Tuple{DataFrames.AbstractDataFrame}" href="#GHOST.find_repos-Tuple{DataFrames.AbstractDataFrame}"><code>GHOST.find_repos</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">find_repos(batch::AbstractDataFrame)::Nothing</code></pre><p>Takes a batch of 10 spdx/createdat and puts the data in the database.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/04_Repos.jl#L18-L22">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GHOST.graphql" href="#GHOST.graphql"><code>GHOST.graphql</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">graphql(obj::GitHubPersonalAccessToken,
        operationName::AbstractString,
        vars::Dict{String};
        max_retries::Integer = 3)</code></pre><p>Return JSON of the GraphQL query.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/01_BaseUtils.jl#L80-L87">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GHOST.licenses-Tuple{}" href="#GHOST.licenses-Tuple{}"><code>GHOST.licenses</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">licenses(conn::Connection,
         pat::GitHubPersonalAccessToken,
         schema::AbstractString = &quot;gh_2007_$(Dates.year(floor(now(), Year) - Day(1)))&quot;,
         )::Nothing</code></pre><p>Uploads the licenses table to the database. It includes every OSI-approved license that is machine readable with Licensee.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/02_Licenses.jl#L1-L9">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GHOST.queries-Tuple{AbstractString}" href="#GHOST.queries-Tuple{AbstractString}"><code>GHOST.queries</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">queries(conn::Connection,
        spdx::AbstractString,
        schema::AbstractString = &quot;gh_2007_$(Dates.year(floor(now(), Year) - Day(1)))&quot;)</code></pre><p>This will upload the queries to the database with:</p><ul><li>spdx::text NOT NULL</li><li>created::tsrange NOT NULL</li><li>count::smallint NOT NULL</li><li>asof::time</li><li>done::bool NOT NULL</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/03_Queries.jl#L107-L118">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GHOST.query_commits-Tuple{AbstractArray{var&quot;#s20&quot;,1} where var&quot;#s20&quot;&lt;:AbstractString,Integer}" href="#GHOST.query_commits-Tuple{AbstractArray{var&quot;#s20&quot;,1} where var&quot;#s20&quot;&lt;:AbstractString,Integer}"><code>GHOST.query_commits</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">query_commits(branches::AbstractVector{&lt;:AbstractString}, batch_size::Integer)::Nothing</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/05_Commits.jl#L141-L143">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GHOST.query_commits-Tuple{AbstractString}" href="#GHOST.query_commits-Tuple{AbstractString}"><code>GHOST.query_commits</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">query_commits(branch::AbstractString)::Nothing</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/05_Commits.jl#L33-L35">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GHOST.setup-Tuple{}" href="#GHOST.setup-Tuple{}"><code>GHOST.setup</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">setup(;host::AbstractString = get(ENV, &quot;PGHOST&quot;, &quot;localhost&quot;),
       port::AbstractString = get(ENV, &quot;PGPORT&quot;, &quot;5432&quot;),
       dbname::AbstractString = get(ENV, &quot;PGDATABASE&quot;, &quot;postgres&quot;),
       user::AbstractString = get(ENV, &quot;PGUSER&quot;, &quot;postgres&quot;),
       password::AbstractString = get(ENV, &quot;PGPASSWORD&quot;, &quot;postgres&quot;),
       schema::AbstractString = &quot;gh_2007_$(year(floor(now(utc_tz), Year) - Day(1)))&quot;,
       pats::Union{Nothing, Vector{GitHubPersonalAccessToken}} = nothing)</code></pre><p>Sets up your PostgreSQL database for the project.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl">julia&gt; setup(pats = [GitHubPersonalAccessToken(&quot;MyGH_Login&quot;, ENV[&quot;GH_PAT&quot;])])
</code></pre><pre><code class="language-julia-repl">julia&gt; setup()
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/01_BaseUtils.jl#L129-L151">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GHOST.setup_parallel" href="#GHOST.setup_parallel"><code>GHOST.setup_parallel</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">setup_parallel(limit::Integer = 0; password::AbstractString = get(ENV, &quot;PGPASSWORD&quot;, &quot;postgres&quot;))::Nothing</code></pre><p>Setup workers.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/01_BaseUtils.jl#L187-L191">source</a></section></article><h2 id="Private"><a class="docs-heading-anchor" href="#Private">Private</a><a id="Private-1"></a><a class="docs-heading-anchor-permalink" href="#Private" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="GHOST.GH_FIRST_REPO_TS" href="#GHOST.GH_FIRST_REPO_TS"><code>GHOST.GH_FIRST_REPO_TS</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia">GH_FIRST_REPO_TS::DateTime = 2007-10-29T14:37:16</code></pre><p>Timestamp when the earliest public GitHub repository was created (id: &quot;MDEwOlJlcG9zaXRvcnkx&quot;, nameWithOwner: &quot;mojombo/grit&quot;)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/GHOST.jl#L39-L43">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GHOST.GITHUB_GRAPHQL_ENDPOINT" href="#GHOST.GITHUB_GRAPHQL_ENDPOINT"><code>GHOST.GITHUB_GRAPHQL_ENDPOINT</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia">GITHUB_GRAPHQL_ENDPOINT::String = &quot;https://api.github.com/graphql&quot;</code></pre><p>GitHub API v4 GraphQL API endpoint.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/GHOST.jl#L33-L37">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GHOST.GITHUB_REST_ENDPOINT" href="#GHOST.GITHUB_REST_ENDPOINT"><code>GHOST.GITHUB_REST_ENDPOINT</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia">GITHUB_REST_ENDPOINT::String = &quot;https://api.github.com&quot;</code></pre><p>GitHub API v3 RESTful root endpoint.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/GHOST.jl#L27-L31">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GHOST.Limits" href="#GHOST.Limits"><code>GHOST.Limits</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Limits</code></pre><p>GitHub API limits.</p><p>It includes how many remaining queries are available for the current time period and when it resets.</p><p><strong>Fields</strong></p><ul><li><code>limit::UInt16</code></li><li><code>remaining::UInt16</code></li><li><code>reset::DateTime</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/01_BaseUtils.jl#L2-L13">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GHOST.cleanintervals-Tuple{Any}" href="#GHOST.cleanintervals-Tuple{Any}"><code>GHOST.cleanintervals</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">cleanintervals(row)</code></pre><p>Returns the input if the count is 1,000 records or fewer. If there are more than a 1,000 it splits them based on the ratio of the count.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/03_Queries.jl#L60-L65">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GHOST.fill_missing_intervals-Tuple{AbstractString,DataFrames.AbstractDataFrame}" href="#GHOST.fill_missing_intervals-Tuple{AbstractString,DataFrames.AbstractDataFrame}"><code>GHOST.fill_missing_intervals</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">fill_missing_intervals(spdx::AbstractString, data::AbstractDataFrame)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/03_Queries.jl#L197-L199">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GHOST.find_repo_count_for_intervals-Tuple{AbstractString,AbstractArray{var&quot;#s23&quot;,1} where var&quot;#s23&quot;&lt;:(Interval{Dates.DateTime,L,R} where R&lt;:Intervals.Bound where L&lt;:Intervals.Bound)}" href="#GHOST.find_repo_count_for_intervals-Tuple{AbstractString,AbstractArray{var&quot;#s23&quot;,1} where var&quot;#s23&quot;&lt;:(Interval{Dates.DateTime,L,R} where R&lt;:Intervals.Bound where L&lt;:Intervals.Bound)}"><code>GHOST.find_repo_count_for_intervals</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">find_repo_count_for_intervals(spdx::AbstractString, created::AbstractVector{&lt;:Interval{DateTime}})</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/03_Queries.jl#L164-L166">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GHOST.format_tsrange-Tuple{Interval{Dates.DateTime,L,R} where R&lt;:Intervals.Bound where L&lt;:Intervals.Bound}" href="#GHOST.format_tsrange-Tuple{Interval{Dates.DateTime,L,R} where R&lt;:Intervals.Bound where L&lt;:Intervals.Bound}"><code>GHOST.format_tsrange</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">format_tsrange(obj::Interval{ZonedDateTime})</code></pre><p>Return the Postgres compatible form.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/03_Queries.jl#L101-L105">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GHOST.parse_author-Tuple{Any}" href="#GHOST.parse_author-Tuple{Any}"><code>GHOST.parse_author</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">parse_author(node)::NamedTuple</code></pre><p>This parses the email, name, and ID of the author node.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/05_Commits.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GHOST.parse_commit-Tuple{Any,Any}" href="#GHOST.parse_commit-Tuple{Any,Any}"><code>GHOST.parse_commit</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">parse_commit(branch, node)::NamedTuple</code></pre><p>This parses a commit node and adds the branch it queried.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/05_Commits.jl#L9-L13">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GHOST.parse_repo-Tuple{Any,AbstractString}" href="#GHOST.parse_repo-Tuple{Any,AbstractString}"><code>GHOST.parse_repo</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">parse_repo(node, spdx::AbstractString)::NamedTuple</code></pre><p>Parses a node and returns a suitable <code>NamedTuple</code> for the table.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/04_Repos.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GHOST.prune-Tuple{Any}" href="#GHOST.prune-Tuple{Any}"><code>GHOST.prune</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">prune(data)</code></pre><p>Prune the intervals based on the created and count values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/03_Queries.jl#L77-L81">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GHOST.query_intervals-Tuple{Array{Array{Interval{Dates.DateTime,Intervals.Closed,Intervals.Open},1},1}}" href="#GHOST.query_intervals-Tuple{Array{Array{Interval{Dates.DateTime,Intervals.Closed,Intervals.Open},1},1}}"><code>GHOST.query_intervals</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">query_intervals(created::AbstractVector{&lt;:AbstractVector{Interval{ZonedDateTime}}})::DataFrame</code></pre><p>Returns a </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/03_Queries.jl#L22-L26">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GHOST.query_intervals-Tuple{Array{Interval{Dates.DateTime,Intervals.Closed,Intervals.Open},1}}" href="#GHOST.query_intervals-Tuple{Array{Interval{Dates.DateTime,Intervals.Closed,Intervals.Open},1}}"><code>GHOST.query_intervals</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">query_intervals(spdx::AbstractString, created::AbstractVector{&lt;:Interval{ZonedDateTime}})</code></pre><p>Return count of search results based on the license for each created interval.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uva-bi-sdad/GHOST.jl/blob/81fbbf47e4842e603da74dbe1ee79f52403cde79/src/03_Queries.jl#L1-L5">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../manual/">« Manual</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 23 February 2021 00:03">Tuesday 23 February 2021</span>. Using Julia version 1.5.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
